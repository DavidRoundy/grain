import Sys from 'sys'

let foo = Sys.pathOpen(
  Sys.pwdfd,
  [Sys.SymlinkFollow],
  "test-data/foo.txt",
  [Sys.Create],
  [Sys.FdRead, Sys.FdWrite],
  [Sys.FdRead, Sys.FdWrite],
  []
)

let (buf, nread) = Sys.fdRead(foo, 40)

Sys.fdClose(foo)

assert buf == 'foo, bar, & baz'
assert nread == 15
